{% comment %}
  Landing Palette Overrides (scoped per template instance)
  - Adds a unique class to <html> so CSS only applies to this landing.
  - Overrides Dawn-like CSS variables + forces primary CTA colors.
{% endcomment %}

{% liquid
  assign cls = 'landing-palette-' | append: section.id | handleize
%}

<script>
  (function () {
    try {
      document.documentElement.classList.add('{{ cls }}');
    } catch (e) {}
  })();
</script>

<style>
  /* ========== Scoped palette variables ========== */
  .{{ cls }}{
    --landing-accent-1: {{ section.settings.accent_1.red }}, {{ section.settings.accent_1.green }}, {{ section.settings.accent_1.blue }};
    --landing-accent-2: {{ section.settings.accent_2.red }}, {{ section.settings.accent_2.green }}, {{ section.settings.accent_2.blue }};
    --landing-text:     {{ section.settings.text.red }}, {{ section.settings.text.green }}, {{ section.settings.text.blue }};
    --landing-bg-1:     {{ section.settings.background_1.red }}, {{ section.settings.background_1.green }}, {{ section.settings.background_1.blue }};
    --landing-bg-2:     {{ section.settings.background_2.red }}, {{ section.settings.background_2.green }}, {{ section.settings.background_2.blue }};

    --landing-cta-bg:   {{ section.settings.button_background.red }}, {{ section.settings.button_background.green }}, {{ section.settings.button_background.blue }};
    --landing-cta-text: {{ section.settings.button_label.red }}, {{ section.settings.button_label.green }}, {{ section.settings.button_label.blue }};
    --landing-cta-hover:{{ section.settings.button_hover.red }}, {{ section.settings.button_hover.green }}, {{ section.settings.button_hover.blue }};
  }

  /* ========== Map Dawn-like scheme classes to landing palette ========== */
  .{{ cls }} .color-background-1{
    --color-background: var(--landing-bg-1);
    --color-foreground: var(--landing-text);
  }
  .{{ cls }} .color-background-2{
    --color-background: var(--landing-bg-2);
    --color-foreground: var(--landing-text);
  }
  .{{ cls }} .color-accent-1{
    --color-background: var(--landing-accent-1);
    --color-foreground: 255, 255, 255;
  }
  .{{ cls }} .color-accent-2{
    --color-background: var(--landing-accent-2);
    --color-foreground: var(--landing-text);
  }

  /* ========== Force CTA colors (works even if theme vars differ) ========== */
  .{{ cls }} .button.button--primary,
  .{{ cls }} .shopify-payment-button__button--unbranded{
    background: rgb(var(--landing-cta-bg)) !important;
    color: rgb(var(--landing-cta-text)) !important;
    border-color: rgb(var(--landing-cta-bg)) !important;
  }
  .{{ cls }} .button.button--primary:hover,
  .{{ cls }} .shopify-payment-button__button--unbranded:hover{
    background: rgb(var(--landing-cta-hover)) !important;
    border-color: rgb(var(--landing-cta-hover)) !important;
  }
</style>

{% schema %}
{
  "name": "Landing palette overrides",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "color", "id": "accent_1", "label": "Accent 1", "default": "#ff4081" },
    { "type": "color", "id": "accent_2", "label": "Accent 2", "default": "#ffebee" },
    { "type": "color", "id": "text", "label": "Text", "default": "#212121" },
    { "type": "color", "id": "background_1", "label": "Background 1", "default": "#ffffff" },
    { "type": "color", "id": "background_2", "label": "Background 2", "default": "#f8f8f8" },

    { "type": "color", "id": "button_label", "label": "CTA Text", "default": "#ffffff" },
    { "type": "color", "id": "button_background", "label": "CTA Background", "default": "#ff4081" },
    { "type": "color", "id": "button_hover", "label": "CTA Hover", "default": "#e6396f" }
  ],
  "presets": [
    { "name": "Landing palette overrides" }
  ]
}
{% endschema %}
